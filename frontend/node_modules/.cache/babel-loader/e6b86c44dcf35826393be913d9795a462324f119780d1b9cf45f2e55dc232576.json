{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function AdminDashboard(){const[orders,setOrders]=useState([]);const[customs,setCustoms]=useState([]);const[msg,setMsg]=useState('');useEffect(()=>{const token=localStorage.getItem('komal_admin_token');if(!token){window.location.href='/admin/login';return;}axios.get('/api/admin/orders',{headers:{Authorization:'Bearer '+token}}).then(r=>setOrders(r.data)).catch(()=>{});axios.get('/api/admin/custom-orders',{headers:{Authorization:'Bearer '+token}}).then(r=>setCustoms(r.data)).catch(()=>{});},[]);async function mark(id){const token=localStorage.getItem('komal_admin_token');try{await axios.post('/api/admin/custom-orders/'+id+'/status',{status:'completed'},{headers:{Authorization:'Bearer '+token}});setMsg('Updated');}catch(err){setMsg('Error');}}return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",style:{padding:30},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Admin Dashboard\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Orders\"}),orders.map(o=>/*#__PURE__*/_jsxs(\"div\",{className:\"card\",style:{marginBottom:8},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:o.name}),\" - \\u20B9\",o.total]}),/*#__PURE__*/_jsx(\"div\",{className:\"small\",children:new Date(o.createdAt).toLocaleString()})]},o._id)),/*#__PURE__*/_jsx(\"h3\",{children:\"Custom Requests\"}),customs.map(c=>/*#__PURE__*/_jsxs(\"div\",{className:\"card\",style:{marginBottom:8},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:c.name}),\" - \",c.description]}),c.imageUrl&&/*#__PURE__*/_jsx(\"img\",{src:c.imageUrl,style:{width:120,marginTop:8},alt:\"\"}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:8},children:/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:()=>mark(c._id),children:\"Mark Completed\"})})]},c._1d)),msg&&/*#__PURE__*/_jsx(\"div\",{children:msg})]});}","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","AdminDashboard","orders","setOrders","customs","setCustoms","msg","setMsg","token","localStorage","getItem","window","location","href","get","headers","Authorization","then","r","data","catch","mark","id","post","status","err","className","style","padding","children","map","o","marginBottom","name","total","Date","createdAt","toLocaleString","_id","c","description","imageUrl","src","width","marginTop","alt","onClick","_1d"],"sources":["C:/Users/user/Downloads/comfort B2B e commerce/frontend/src/pages/AdminDashboard.js"],"sourcesContent":["import React, {useEffect, useState} from 'react';\nimport axios from 'axios';\nexport default function AdminDashboard(){\n  const [orders,setOrders]=useState([]); const [customs,setCustoms]=useState([]); const [msg,setMsg]=useState('');\n  useEffect(()=>{ const token = localStorage.getItem('komal_admin_token'); if(!token){ window.location.href='/admin/login'; return; } axios.get('/api/admin/orders', { headers:{ Authorization: 'Bearer '+token } }).then(r=> setOrders(r.data)).catch(()=>{}); axios.get('/api/admin/custom-orders', { headers:{ Authorization: 'Bearer '+token } }).then(r=> setCustoms(r.data)).catch(()=>{}); },[]);\n  async function mark(id){ const token = localStorage.getItem('komal_admin_token'); try{ await axios.post('/api/admin/custom-orders/'+id+'/status', { status:'completed' }, { headers:{ Authorization:'Bearer '+token } }); setMsg('Updated'); }catch(err){ setMsg('Error'); } }\n  return (<div className='container' style={{padding:30}}><h2>Admin Dashboard</h2><h3>Orders</h3>{orders.map(o=> <div key={o._id} className='card' style={{marginBottom:8}}><div><strong>{o.name}</strong> - â‚¹{o.total}</div><div className='small'>{new Date(o.createdAt).toLocaleString()}</div></div>)}<h3>Custom Requests</h3>{customs.map(c=> <div key={c._1d} className='card' style={{marginBottom:8}}><div><strong>{c.name}</strong> - {c.description}</div>{c.imageUrl && <img src={c.imageUrl} style={{width:120, marginTop:8}} alt=''/>}<div style={{marginTop:8}}><button className='btn' onClick={()=> mark(c._id)}>Mark Completed</button></div></div>) }{msg && <div>{msg}</div>}</div>);\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}